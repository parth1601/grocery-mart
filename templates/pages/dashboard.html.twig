{% extends '@EasyAdmin/page/content.html.twig' %}
{% block content %}
    {% block head_stylesheets %}
        {{ parent() }}
        <link rel="stylesheet" href="{{ asset('admin/flexmonster/css/styles.css') }}"> 
        <link href="{{ asset('admin/flexmonster/flexmonster.min.css') }}" rel="stylesheet" type="text/css" />   
        <link href="{{ asset('admin/flexmonster/theme/lightblue/flexmonster.min.css') }}" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="{{ asset('admin/flexmonster/css/customCss.css') }}"> 
    {% endblock %}
     <section id="app" class="main">
        {# <button onclick="add()">Add condition</button>
        <button onclick="remove()">Remove all conditions</button> #}
        <div class="wrap" >
            <div id="pivot-container" class="pb-30" >
            </div>
        </div>
        {# <div class="output" id="output"></div> #}
    </section>
    {# {% block body_javascript %} #}
        <script src="{{ asset('admin/flexmonster/flexmonster.js') }}" type="text/javascript"></script>
        {# <script src="{{ asset('admin/flexmonster/js/customJs.js') }}" type="text/javascript"></script> #}
        <script>
            function customizeToolbar(toolbar) { 
                // get all tabs 
                var tabs = toolbar.getTabs(); 
                toolbar.getTabs = function () { 
                    // delete the first tab 
                    delete tabs[0];
                    delete tabs[11];
                    delete tabs[13];
                    return tabs; 
                } 
            }

            var pivot = new Flexmonster({
                container: "pivot-container",
                toolbar: true,
                beforetoolbarcreated: customizeToolbar,
                //customizeAPIRequest: customizeAPIRequestFunction,

                report: {
                    options: {
                        defaultDateType: "date string",
                        datePattern: "MMMM d, yyyy",
                        grid: {
                            showFilter: false,
                        },
                        chart: {
                            showFilter: false,
                        }
                    },
                    dataSource: {
                        type: "api",
                        url: "http://localhost:9500",
                        index: "order-details",
                    },
                    slice: {
                        rows: [
                            { 
                                uniqueName: "created_at",
                                sort: "desc"
                            }
                        ],
                        measures: [
                            {
                                uniqueName: "total_price", 
                                aggregation: "sum" 
                            }
                        ],
                        reportFilters:[
                            {
                                uniqueName: "user_id_id",
                                filter: {
                                    members: ["user_id_id.[{{user_id}}]"]
                                }
                            }
                        ]
                    }
                
                },
                licenseKey: "Z7ZP-XE2I72-682923-136R6E"
            });
        </script>
    {# {% endblock body_javascript %}         #}
       
{% endblock %}
